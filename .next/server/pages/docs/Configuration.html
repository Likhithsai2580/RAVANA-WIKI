<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta charSet="utf-8"/><title>Configuration<!-- --> - RAVANA AGI Documentation</title><meta name="description" content="Documentation for Configuration"/><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/aa7d986e9c238cc1.css" as="style"/><link rel="stylesheet" href="/_next/static/css/aa7d986e9c238cc1.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js" defer="" data-nscript="beforeInteractive"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js" defer="" data-nscript="beforeInteractive"></script><script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.0/dist/mermaid.min.js" defer="" data-nscript="beforeInteractive"></script><script src="/_next/static/chunks/webpack-8fa1640cc84ba8fe.js" defer=""></script><script src="/_next/static/chunks/framework-64ad27b21261a9ce.js" defer=""></script><script src="/_next/static/chunks/main-eb143115b8bf2786.js" defer=""></script><script src="/_next/static/chunks/pages/_app-a41459f5c0b49356.js" defer=""></script><script src="/_next/static/chunks/664-d254d21a6fe56bff.js" defer=""></script><script src="/_next/static/chunks/pages/docs/%5Bslug%5D-37d587d3c8e56222.js" defer=""></script><script src="/_next/static/QHWQNiRZOuW15nbk5-ngt/_buildManifest.js" defer=""></script><script src="/_next/static/QHWQNiRZOuW15nbk5-ngt/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="min-h-screen flex flex-col"><div class="min-h-screen flex flex-col"><header class="bg-wiki-blue text-white p-4 shadow-md"><div class="container mx-auto flex justify-between items-center"><h1 class="text-2xl font-bold">RAVANA AGI Documentation</h1><nav><ul class="flex space-x-4"><li><a class="hover:underline" href="/">Home</a></li></ul></nav></div></header><div class="flex-grow container mx-auto p-4 flex flex-col md:flex-row gap-6"><div class="w-full md:w-64 flex-shrink-0"><nav class="w-full md:w-64 flex-shrink-0"><div class="bg-white rounded-lg shadow p-4 sticky top-4"><h3 class="font-bold text-lg mb-3">Documentation</h3><ul class="space-y-1"><li class="mb-3"><div class="font-semibold text-gray-700">A</div><ul class="ml-2 mt-1 space-y-1"><li><a class="block py-1 px-2 rounded hover:bg-gray-100 text-gray-600" href="/docs/Action%20System">Action System</a></li><li><a class="block py-1 px-2 rounded hover:bg-gray-100 text-gray-600" href="/docs/API%20Reference">API Reference</a></li><li><a class="block py-1 px-2 rounded hover:bg-gray-100 text-gray-600" href="/docs/Architecture%20&amp;%20Design">Architecture &amp; Design</a></li></ul></li><li class="mb-3"><div class="font-semibold text-gray-700">C</div><ul class="ml-2 mt-1 space-y-1"><li><a class="block py-1 px-2 rounded hover:bg-gray-100 bg-wiki-blue text-white" href="/docs/Configuration">Configuration</a></li><li><a class="block py-1 px-2 rounded hover:bg-gray-100 text-gray-600" href="/docs/Conversational%20AI%20Communication%20Framework">Conversational AI Communication Framework</a></li><li><a class="block py-1 px-2 rounded hover:bg-gray-100 text-gray-600" href="/docs/Core%20System">Core System</a></li></ul></li><li class="mb-3"><div class="font-semibold text-gray-700">D</div><ul class="ml-2 mt-1 space-y-1"><li><a class="block py-1 px-2 rounded hover:bg-gray-100 text-gray-600" href="/docs/Database%20Schema">Database Schema</a></li><li><a class="block py-1 px-2 rounded hover:bg-gray-100 text-gray-600" href="/docs/Decision-Making%20System">Decision-Making System</a></li><li><a class="block py-1 px-2 rounded hover:bg-gray-100 text-gray-600" href="/docs/Deployment%20&amp;%20Operations">Deployment &amp; Operations</a></li><li><a class="block py-1 px-2 rounded hover:bg-gray-100 text-gray-600" href="/docs/Development%20Guide">Development Guide</a></li></ul></li><li class="mb-3"><div class="font-semibold text-gray-700">E</div><ul class="ml-2 mt-1 space-y-1"><li><a class="block py-1 px-2 rounded hover:bg-gray-100 text-gray-600" href="/docs/Emotional%20Intelligence">Emotional Intelligence</a></li><li><a class="block py-1 px-2 rounded hover:bg-gray-100 text-gray-600" href="/docs/Enhanced%20Snake%20Agent">Enhanced Snake Agent</a></li><li><a class="block py-1 px-2 rounded hover:bg-gray-100 text-gray-600" href="/docs/Enhanced%20Snake%20Agent%20Architecture">Enhanced Snake Agent Architecture</a></li></ul></li><li class="mb-3"><div class="font-semibold text-gray-700">G</div><ul class="ml-2 mt-1 space-y-1"><li><a class="block py-1 px-2 rounded hover:bg-gray-100 text-gray-600" href="/docs/Graceful%20Shutdown">Graceful Shutdown</a></li></ul></li><li class="mb-3"><div class="font-semibold text-gray-700">L</div><ul class="ml-2 mt-1 space-y-1"><li><a class="block py-1 px-2 rounded hover:bg-gray-100 text-gray-600" href="/docs/LLM%20Integration">LLM Integration</a></li></ul></li><li class="mb-3"><div class="font-semibold text-gray-700">M</div><ul class="ml-2 mt-1 space-y-1"><li><a class="block py-1 px-2 rounded hover:bg-gray-100 text-gray-600" href="/docs/Memory%20Systems">Memory Systems</a></li><li><a class="block py-1 px-2 rounded hover:bg-gray-100 text-gray-600" href="/docs/Multi-Modal%20Memory">Multi-Modal Memory</a></li></ul></li><li class="mb-3"><div class="font-semibold text-gray-700">P</div><ul class="ml-2 mt-1 space-y-1"><li><a class="block py-1 px-2 rounded hover:bg-gray-100 text-gray-600" href="/docs/Project%20Overview">Project Overview</a></li></ul></li><li class="mb-3"><div class="font-semibold text-gray-700">S</div><ul class="ml-2 mt-1 space-y-1"><li><a class="block py-1 px-2 rounded hover:bg-gray-100 text-gray-600" href="/docs/Self-Improvement">Self-Improvement</a></li><li><a class="block py-1 px-2 rounded hover:bg-gray-100 text-gray-600" href="/docs/Services">Services</a></li><li><a class="block py-1 px-2 rounded hover:bg-gray-100 text-gray-600" href="/docs/Snake%20Agent%20Configuration">Snake Agent Configuration</a></li><li><a class="block py-1 px-2 rounded hover:bg-gray-100 text-gray-600" href="/docs/Specialized%20Modules-57f9b30b-b165-48d3-8e89-196940d26190">Specialized Modules</a></li><li><a class="block py-1 px-2 rounded hover:bg-gray-100 text-gray-600" href="/docs/Specialized%20Modules">Specialized Modules</a></li></ul></li></ul></div></nav></div><main class="flex-grow"><nav class="mb-4 text-sm"><ol class="list-none p-0 inline-flex"><li class="flex items-center"><a class="text-wiki-blue hover:underline" href="/">Home</a><svg class="fill-current w-3 h-3 mx-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"></path></svg></li><li class="flex items-center"><span class="text-gray-500">Configuration</span></li></ol></nav><div class="flex flex-col md:flex-row gap-6"><article class="prose max-w-none bg-white p-6 rounded-lg shadow flex-grow"><h1>Configuration</h1><div><h1>Configuration</h1>
<h2>Update Summary</h2>
<p><strong>Changes Made</strong></p>
<ul>
<li>Added comprehensive documentation for enhanced graceful shutdown configuration options</li>
<li>Updated LLM provider configuration section with new Gemini API key details</li>
<li>Added new section on shutdown coordinator functionality and phases</li>
<li>Updated environment variables section with new shutdown-related settings</li>
<li>Added new diagram for shutdown process flow</li>
<li>Updated referenced files list with new and modified files</li>
</ul>
<h2>Table of Contents</h2>
<ol>
<li><a href="#configuration-overview">Configuration Overview</a></li>
<li><a href="#core-configuration-files">Core Configuration Files</a></li>
<li><a href="#config-class-implementation">Config Class Implementation</a></li>
<li><a href="#llm-provider-configuration">LLM Provider Configuration</a></li>
<li><a href="#module-specific-settings">Module-Specific Settings</a></li>
<li><a href="#configuration-loading-and-validation">Configuration Loading and Validation</a></li>
<li><a href="#environment-variables-and-overrides">Environment Variables and Overrides</a></li>
<li><a href="#sensitive-data-handling">Sensitive Data Handling</a></li>
<li><a href="#advanced-configuration-management">Advanced Configuration Management</a></li>
<li><a href="#configuration-examples">Configuration Examples</a></li>
<li><a href="#common-configuration-issues">Common Configuration Issues</a></li>
<li><a href="#best-practices">Best Practices</a></li>
</ol>
<h2>Configuration Overview</h2>
<p>The RAVANA system implements a comprehensive configuration management system that combines JSON configuration files with environment variable overrides. The system supports multiple configuration sources, including global settings, module-specific configurations, and runtime environment variables. This layered approach enables flexible deployment across different environments while maintaining security and consistency.</p>
<p>The configuration system serves as the central nervous system for the AGI framework, controlling everything from LLM provider selection to emotional intelligence parameters and autonomous behavior patterns. Two primary mechanisms work together: the static <code>config.json</code> files that define default settings and provider configurations, and the dynamic <code>Config</code> class that loads, validates, and provides access to settings throughout the application.</p>
<p><strong>Section sources</strong></p>
<ul>
<li><a>config.py</a></li>
<li><a>config.json</a></li>
</ul>
<h2>Core Configuration Files</h2>
<p>The system utilizes multiple JSON configuration files to manage different aspects of the AGI framework. The primary configuration file <code>core/config.json</code> contains LLM provider credentials, API endpoints, and model availability information. This file serves as the authoritative source for external service integrations.</p>
<p>``mermaid
graph TD
A[Configuration Files] --> B[core/config.json]
A --> C[modules/conversational_ai/config.json]
A --> D[modules/emotional_intellegence/config.json]
A --> E[modules/emotional_intellegence/persona.json]
B --> F[LLM Providers]
B --> G[API Keys]
B --> H[Model Lists]
C --> I[Platform Integration]
C --> J[Communication Settings]
D --> K[Emotional Triggers]
D --> L[Behavior Influences]
E --> M[Persona Definitions]
E --> N[Mood Multipliers]</p>
<pre><code>
**Diagram sources**
- [config.json](file://c:\Users\ASUS\Documents\GitHub\RAVANA\core\config.json#L1-L193)
- [conversational_ai/config.json](file://c:\Users\ASUS\Documents\GitHub\RAVANA\modules\conversational_ai\config.json#L1-L27)
- [emotional_intellegence/config.json](file://c:\Users\ASUS\Documents\GitHub\RAVANA\modules\emotional_intellegence\config.json#L1-L202)
- [persona.json](file://c:\Users\ASUS\Documents\GitHub\RAVANA\modules\emotional_intellegence\persona.json#L1-L86)

**Section sources**
- [config.json](file://c:\Users\ASUS\Documents\GitHub\RAVANA\core\config.json#L1-L193)
- [conversational_ai/config.json](file://c:\Users\ASUS\Documents\GitHub\RAVANA\modules\conversational_ai\config.json#L1-L27)
- [emotional_intellegence/config.json](file://c:\Users\ASUS\Documents\GitHub\RAVANA\modules\emotional_intellegence\config.json#L1-L202)
- [persona.json](file://c:\Users\ASUS\Documents\GitHub\RAVANA\modules\emotional_intellegence\persona.json#L1-L86)

## Config Class Implementation

The `Config` class in `core/config.py` serves as the central configuration manager, providing a unified interface for accessing settings from both JSON files and environment variables. This class implements a hierarchical override system where environment variables take precedence over JSON file values, enabling flexible deployment configurations.

```python
class Config:
    DATABASE_URL = os.environ.get("DATABASE_URL", "sqlite:///ravana_agi.db")
    LOG_LEVEL = os.environ.get("LOG_LEVEL", "INFO")
    CURIOSITY_CHANCE = float(os.environ.get("CURIOSITY_CHANCE", 0.3))
    # ... additional settings
</code></pre>
<p>The class uses Python's <code>os.environ.get()</code> method to retrieve environment variables with fallback to default values. Type conversion is explicitly handled for different data types: strings remain as-is, numeric values are converted using <code>int()</code> or <code>float()</code>, and boolean values are parsed from string representations ("true", "1", "yes") to Python boolean values.</p>
<p>``mermaid
classDiagram
class Config {
+DATABASE_URL : str
+LOG_LEVEL : str
+CURIOSITY_CHANCE : float
+REFLECTION_CHANCE : float
+LOOP_SLEEP_DURATION : int
+EMOTIONAL_PERSONA : str
+SNAKE_AGENT_ENABLED : bool
+BLOG_ENABLED : bool
+get_setting(key : str) : Any
+validate_configuration() : List[str]
}
class ConfigLoader {
+load_from_json(path : str) : Dict
+load_from_env(prefix : str) : Dict
+merge_configurations() : Dict
+validate_settings(config : Dict) : bool
}
Config "1" -- "1" ConfigLoader : uses</p>
<pre><code>
**Diagram sources**
- [config.py](file://c:\Users\ASUS\Documents\GitHub\RAVANA\core\config.py#L2-L182)

**Section sources**
- [config.py](file://c:\Users\ASUS\Documents\GitHub\RAVANA\core\config.py#L2-L182)

## LLM Provider Configuration

The system supports multiple LLM providers through the `core/config.json` file, which defines API endpoints, authentication credentials, and available models for each provider. This configuration enables the system to route requests to different providers based on model availability, cost considerations, and performance requirements.

### Provider Configuration Structure

Each provider in the configuration file follows a consistent structure with the following key components:

- **api_key**: Authentication token for the provider API
- **base_url**: Endpoint URL for API requests
- **models**: List of available models that can be used

```json
{
  "zuki": {
    "api_key": "zu-ab9fba2aeef85c7ecb217b00ce7ca1fe",
    "base_url": "https://api.zukijourney.com/v1",
    "models": [
      "gpt-4o:online",
      "gpt-4o",
      "deepseek-chat",
      "deepseek-reasoner"
    ]
  }
}
</code></pre>
<h3>Multi-Key Fallback System</h3>
<p>The Gemini provider implements a sophisticated multi-key fallback system that allows the system to rotate through multiple API keys when rate limits are reached:</p>
<pre><code class="language-json">"gemini": {
  "api_keys": [
    {
      "id": "gemini_key_1",
      "key": "AIzaSyBW-aVU-x7JCjBJVVKjPGUacups0-GBHvQ",
      "priority": 1,
      "failure_count": 0,
      "last_success": null
    },
    {
      "id": "gemini_key_2",
      "key": "AIzaSyBW-aVU-x7JCjBJVVKjPGUacups0-GBHvQ",
      "priority": 2,
      "failure_count": 0,
      "last_success": null
    },
    {
      "id": "gemini_key_3",
      "key": "AIzaSyC8hTaXE6jkWDFZyZDybFEoHfPR-4VSV-k",
      "priority": 3,
      "failure_count": 0,
      "last_success": null
    },
    {
      "id": "gemini_key_10",
      "key": "AIzaSyBCQic67-TJmSXUVTCiW3SFU5fLZx7enII",
      "priority": 10,
      "failure_count": 0,
      "last_success": null
    }
  ],
  "rate_limit": {
    "requests_per_minute": 60,
    "cooldown_period": 300,
    "max_retries": 3,
    "backoff_factor": 2.0
  },
  "fallback": {
    "enabled": true,
    "timeout": 30,
    "max_key_failures": 5
  }
}
</code></pre>
<p>This configuration enables resilient operation by automatically switching to backup keys when the primary key encounters rate limiting or failures. The recent update has expanded the Gemini configuration to include 10 API keys with priority-based rotation.</p>
<p>``mermaid
sequenceDiagram
participant Client as "Application"
participant Config as "Config System"
participant Provider as "LLM Provider"
Client->>Config : Request model usage
Config->>Config : Select provider based on model availability
Config->>Provider : Send API request with primary key
alt Rate limit exceeded
Provider-->>Config : 429 Too Many Requests
Config->>Config : Increment failure count
Config->>Config : Select next priority key
Config->>Provider : Retry with backup key
else Success
Provider-->>Config : 200 OK with response
end
Config-->>Client : Return response or error</p>
<pre><code>
**Diagram sources**
- [config.json](file://c:\Users\ASUS\Documents\GitHub\RAVANA\core\config.json#L1-L193)
- [llm.py](file://c:\Users\ASUS\Documents\GitHub\RAVANA\core\llm.py#L46-L114)

**Section sources**
- [config.json](file://c:\Users\ASUS\Documents\GitHub\RAVANA\core\config.json#L1-L193)
- [llm.py](file://c:\Users\ASUS\Documents\GitHub\RAVANA\core\llm.py#L46-L114)

## Module-Specific Settings

Different modules within the RAVANA system have specialized configuration requirements that are managed through dedicated configuration files and settings.

### Emotional Intelligence Configuration

The emotional intelligence module uses two configuration files to define emotional states and persona behaviors:

```json
{
  "emotional_intelligence_config": {
    "primary_emotions": {
      "joy_based": ["Confident", "Excited", "Inspired", "Satisfied"],
      "interest_based": ["Curious", "Reflective", "Intrigued", "Engaged"]
    },
    "secondary_emotions": [
      "Hopeful", "Grateful", "Proud", "Guilty"
    ],
    "emotion_intensity_levels": {
      "low": [0.0, 0.33],
      "medium": [0.34, 0.66],
      "high": [0.67, 1.0]
    },
    "triggers": {
      "new_discovery": "The agent has discovered new information or learned something novel.",
      "task_completed": "A task or goal has been successfully completed."
    },
    "mood_updates": {
      "new_discovery": {
        "Curious": 0.2,
        "Excited": 0.15,
        "Inspired": 0.1
      }
    },
    "behavior_influences": {
      "Confident": {
        "risk_tolerance": "high",
        "exploration_tendency": "high",
        "planning_depth": "medium"
      }
    }
  }
}
</code></pre>
<h3>Conversational AI Configuration</h3>
<p>The conversational AI module manages platform integrations and communication settings:</p>
<pre><code class="language-json">{
  "discord_token": "",
  "telegram_token": "",
  "platforms": {
    "discord": {
      "enabled": true,
      "command_prefix": "!"
    },
    "telegram": {
      "enabled": true,
      "command_prefix": "/"
    }
  },
  "emotional_intelligence": {
    "default_persona": "Balanced",
    "mood_decay_rate": 0.05,
    "context_window_hours": 24
  }
}
</code></pre>
<h3>Persona Configuration</h3>
<p>The <code>persona.json</code> file defines different personality types and their emotional response patterns:</p>
<pre><code class="language-json">{
  "personas": {
    "Optimistic": {
      "mood_multipliers": {
        "Confident": 1.5,
        "Curious": 1.2,
        "Frustrated": 0.5
      },
      "description": "Sees the glass as half full. Bounces back from setbacks quickly.",
      "adaptation_rate": 0.1
    },
    "Analytical": {
      "mood_multipliers": {
        "Confident": 1.1,
        "Curious": 1.8,
        "Frustrated": 0.8
      },
      "description": "Driven by data and logic. Less prone to strong emotional swings.",
      "adaptation_rate": 0.15
    }
  },
  "default_persona": "Balanced"
}
</code></pre>
<p><strong>Section sources</strong></p>
<ul>
<li><a>emotional_intellegence/config.json</a></li>
<li><a>conversational_ai/config.json</a></li>
<li><a>persona.json</a></li>
</ul>
<h2>Configuration Loading and Validation</h2>
<p>The configuration system follows a well-defined process for loading and validating settings from multiple sources. The <code>Config</code> class automatically loads settings in the following priority order:</p>
<ol>
<li>Environment variables (highest priority)</li>
<li>JSON configuration files</li>
<li>Hard-coded default values</li>
</ol>
<h3>Configuration Validation</h3>
<p>The system includes built-in validation for critical configuration parameters. For example, the Snake Agent configuration validates model settings and resource limits:</p>
<pre><code class="language-python">SNAKE_CODING_MODEL = {
    "provider": "ollama",
    "model_name": os.environ.get("SNAKE_CODING_MODEL", "gpt-oss:20b"),
    "temperature": float(os.environ.get("SNAKE_CODING_TEMPERATURE", "0.1")),
    "max_tokens": None if os.environ.get("SNAKE_CODING_MAX_TOKENS", "unlimited").lower() in ["unlimited", "none", "-1"] else int(os.environ.get("SNAKE_CODING_MAX_TOKENS", "4096")),
    "timeout": int(os.environ.get("SNAKE_OLLAMA_TIMEOUT", 3000))
}
</code></pre>
<h3>Configuration Access Pattern</h3>
<p>Components throughout the system access configuration values using direct attribute access:</p>
<pre><code class="language-python">from core.config import Config

# Access configuration values
if Config.BLOG_ENABLED:
    publish_content()

model_name = Config.SNAKE_CODING_MODEL["model_name"]
timeout = Config.SNAKE_OLLAMA_TIMEOUT
</code></pre>
<p>This pattern is used consistently across 25+ files in the codebase, demonstrating the central role of the Config class in the system architecture.</p>
<p>``mermaid
flowchart TD
A[Start] --> B[Load Environment Variables]
B --> C{Variable Exists?}
C --> |Yes| D[Use Environment Value]
C --> |No| E[Use JSON File Value]
E --> F{Value in JSON?}
F --> |Yes| G[Use JSON Value]
F --> |No| H[Use Default Value]
D --> I[Convert to Proper Type]
G --> I
H --> I
I --> J[Store in Config Class]
J --> K[Application Uses Config]</p>
<pre><code>
**Diagram sources**
- [config.py](file://c:\Users\ASUS\Documents\GitHub\RAVANA\core\config.py#L2-L182)

**Section sources**
- [config.py](file://c:\Users\ASUS\Documents\GitHub\RAVANA\core\config.py#L2-L182)

## Environment Variables and Overrides

The system extensively uses environment variables to enable runtime configuration without modifying configuration files. This approach supports secure deployment practices by keeping sensitive information out of version control.

### Override Mechanism

The override mechanism follows a simple pattern for all configuration values:

```python
# Pattern: os.environ.get("ENV_VAR_NAME", "default_value")
LOG_LEVEL = os.environ.get("LOG_LEVEL", "INFO")
CURIOSITY_CHANCE = float(os.environ.get("CURIOSITY_CHANCE", 0.3))
SNAKE_AGENT_ENABLED = bool(os.environ.get("SNAKE_AGENT_ENABLED", "True").lower() in ["true", "1", "yes"])
</code></pre>
<h3>Common Environment Variables</h3>
<p>The system recognizes numerous environment variables for different configuration aspects:</p>
<p><strong>Autonomous Behavior</strong></p>
<ul>
<li><code>CURIOSITY_CHANCE</code>: Probability of initiating curiosity-driven actions (default: 0.3)</li>
<li><code>REFLECTION_CHANCE</code>: Probability of self-reflection (default: 0.1)</li>
<li><code>LOOP_SLEEP_DURATION</code>: Delay between autonomous loops (default: 10 seconds)</li>
</ul>
<p><strong>Snake Agent Configuration</strong></p>
<ul>
<li><code>SNAKE_AGENT_ENABLED</code>: Whether the Snake Agent is active (default: True)</li>
<li><code>SNAKE_CODING_MODEL</code>: Ollama model for coding tasks (default: gpt-oss:20b)</li>
<li><code>SNAKE_REASONING_MODEL</code>: Ollama model for reasoning tasks (default: deepseek-r1:7b)</li>
</ul>
<p><strong>Blog Integration</strong></p>
<ul>
<li><code>RAVANA_BLOG_ENABLED</code>: Whether blog publishing is enabled (default: True)</li>
<li><code>RAVANA_BLOG_API_URL</code>: Endpoint for blog publishing (default: <a href="https://ravana-blog.netlify.app/api/publish">https://ravana-blog.netlify.app/api/publish</a>)</li>
<li><code>RAVANA_BLOG_AUTH_TOKEN</code>: Authentication token for blog API</li>
</ul>
<p><strong>Shutdown Configuration</strong></p>
<ul>
<li><code>GRACEFUL_SHUTDOWN_ENABLED</code>: Whether to perform graceful shutdown (default: True)</li>
<li><code>SHUTDOWN_TIMEOUT</code>: Maximum time for shutdown process (default: 30 seconds)</li>
<li><code>STATE_PERSISTENCE_ENABLED</code>: Whether to save state on shutdown (default: True)</li>
<li><code>SHUTDOWN_HEALTH_CHECK_ENABLED</code>: Whether to perform health checks before shutdown (default: True)</li>
<li><code>SHUTDOWN_BACKUP_ENABLED</code>: Whether to create backups during shutdown (default: True)</li>
<li><code>SHUTDOWN_BACKUP_COUNT</code>: Number of backup files to retain (default: 5)</li>
<li><code>SHUTDOWN_STATE_VALIDATION_ENABLED</code>: Whether to validate state data before persistence (default: True)</li>
<li><code>SHUTDOWN_VALIDATION_ENABLED</code>: Whether to validate state file integrity (default: True)</li>
<li><code>SHUTDOWN_COMPRESSION_ENABLED</code>: Whether to enable compression during shutdown (default: True)</li>
<li><code>COMPONENT_PREPARE_TIMEOUT</code>: Timeout for component preparation phase (default: 10.0 seconds)</li>
<li><code>COMPONENT_SHUTDOWN_TIMEOUT</code>: Timeout for component shutdown phase (default: 15.0 seconds)</li>
<li><code>MEMORY_SERVICE_SHUTDOWN_TIMEOUT</code>: Timeout for memory service shutdown (default: 15 seconds)</li>
<li><code>POSTGRES_CONNECTION_TIMEOUT</code>: Timeout for PostgreSQL connection (default: 10 seconds)</li>
<li><code>CHROMADB_PERSIST_ON_SHUTDOWN</code>: Whether to persist ChromaDB data on shutdown (default: True)</li>
<li><code>TEMP_FILE_CLEANUP_ENABLED</code>: Whether to clean up temporary files on shutdown (default: True)</li>
<li><code>ACTION_CACHE_PERSIST</code>: Whether to persist action cache on shutdown (default: True)</li>
<li><code>RESOURCE_CLEANUP_TIMEOUT</code>: Timeout for resource cleanup (default: 10 seconds)</li>
<li><code>DATABASE_CLEANUP_TIMEOUT</code>: Timeout for database cleanup (default: 15 seconds)</li>
<li><code>FORCE_SHUTDOWN_AFTER</code>: Maximum time before forcing shutdown (default: 60 seconds)</li>
</ul>
<p><strong>Section sources</strong></p>
<ul>
<li><a>config.py</a></li>
</ul>
<h2>Sensitive Data Handling</h2>
<p>The system implements multiple strategies for handling sensitive configuration data securely.</p>
<h3>API Key Management</h3>
<p>API keys are stored in the <code>config.json</code> file alongside other provider configuration:</p>
<pre><code class="language-json">{
  "zuki": {
    "api_key": "zu-ab9fba2aeef85c7ecb217b00ce7ca1fe",
    "base_url": "https://api.zukijourney.com/v1"
  }
}
</code></pre>
<p>For production deployments, these values should be overridden using environment variables to prevent accidental exposure in version control.</p>
<h3>Token Security</h3>
<p>Platform integration tokens are stored in module-specific configuration files:</p>
<pre><code class="language-json">{
  "discord_token": "",
  "telegram_token": ""
}
</code></pre>
<p>These tokens should be managed using environment variables in production environments.</p>
<h3>Secure Defaults</h3>
<p>The system implements secure defaults for sensitive settings:</p>
<pre><code class="language-python"># Blog authentication token (should be overridden in production)
BLOG_AUTH_TOKEN = os.environ.get("RAVANA_BLOG_AUTH_TOKEN", "ravana_secret_token_2024")

# Snake Agent safety configuration
SNAKE_APPROVAL_REQUIRED = bool(os.environ.get("SNAKE_APPROVAL_REQUIRED", "True").lower() in ["true", "1", "yes"])
</code></pre>
<p>The default authentication token is intentionally weak to encourage users to set their own secure values.</p>
<p><strong>Section sources</strong></p>
<ul>
<li><a>config.json</a></li>
<li><a>conversational_ai/config.json</a></li>
<li><a>config.py</a></li>
</ul>
<h2>Advanced Configuration Management</h2>
<p>The system includes advanced configuration management capabilities through the VLTM (Very Long-Term Memory) configuration system and enhanced shutdown coordinator.</p>
<h3>Enhanced Shutdown Configuration</h3>
<p>The system now features a comprehensive shutdown configuration system with multiple phases and validation steps. The <code>shutdown_coordinator.py</code> file implements a multi-phase shutdown process:</p>
<pre><code class="language-python">class ShutdownCoordinator:
    async def initiate_shutdown(self, reason: str = "manual"):
        """Initiate the graceful shutdown process."""
        # Execute shutdown phases in sequence
        await self._execute_shutdown_phases()
</code></pre>
<h3>Shutdown Process Flow</h3>
<p>The enhanced shutdown process follows a structured sequence of phases:</p>
<p>``mermaid
graph TD
A[Initiate Shutdown] --> B[Pre-Shutdown Validation]
B --> C[Signal Received]
C --> D[Component Notification]
D --> E[Stop Background Tasks]
E --> F[Resource Cleanup]
F --> G[Service Shutdown]
G --> H[State Persistence]
H --> I[Final Validation]
I --> J[Shutdown Complete]</p>
<pre><code>
### Shutdown Phase Configuration

The system supports configurable timeouts and behaviors for each shutdown phase:

```python
# Shutdown phase configuration
SHUTDOWN_HEALTH_CHECK_ENABLED = bool(os.environ.get("SHUTDOWN_HEALTH_CHECK_ENABLED", "True").lower() in ["true", "1", "yes"])
SHUTDOWN_BACKUP_ENABLED = bool(os.environ.get("SHUTDOWN_BACKUP_ENABLED", "True").lower() in ["true", "1", "yes"])
SHUTDOWN_BACKUP_COUNT = int(os.environ.get("SHUTDOWN_BACKUP_COUNT", 5))
SHUTDOWN_STATE_VALIDATION_ENABLED = bool(os.environ.get("SHUTDOWN_STATE_VALIDATION_ENABLED", "True").lower() in ["true", "1", "yes"])
SHUTDOWN_VALIDATION_ENABLED = bool(os.environ.get("SHUTDOWN_VALIDATION_ENABLED", "True").lower() in ["true", "1", "yes"])
SHUTDOWN_COMPRESSION_ENABLED = bool(os.environ.get("SHUTDOWN_COMPRESSION_ENABLED", "True").lower() in ["true", "1", "yes"])
COMPONENT_PREPARE_TIMEOUT = float(os.environ.get("COMPONENT_PREPARE_TIMEOUT", 10.0))
COMPONENT_SHUTDOWN_TIMEOUT = float(os.environ.get("COMPONENT_SHUTDOWN_TIMEOUT", 15.0))
</code></pre>
<h3>Shutdown Lifecycle</h3>
<p>The system manages the full lifecycle of shutdown operations:</p>
<p>``mermaid
stateDiagram-v2
[<em>] --> PreShutdownValidation
PreShutdownValidation --> SignalReceived : health checks passed
SignalReceived --> ComponentNotification : signal sent
ComponentNotification --> TasksStopping : components notified
TasksStopping --> ResourceCleanup : tasks stopped
ResourceCleanup --> ServiceShutdown : resources cleaned
ServiceShutdown --> StatePersistence : services shutdown
StatePersistence --> FinalValidation : state persisted
FinalValidation --> ShutdownComplete : validation passed
ShutdownComplete --> [</em>]</p>
<pre><code>
### Shutdown History and Logging

The system maintains detailed logs of shutdown operations:

```python
def _log_shutdown_summary(self):
    """Log a summary of the shutdown process."""
    log_data = {
        "shutdown_summary": self.shutdown_state,
        "duration_seconds": elapsed,
        "timestamp": datetime.utcnow().isoformat()
    }
</code></pre>
<p>This feature enables auditing and troubleshooting of shutdown operations.</p>
<p><strong>Diagram sources</strong></p>
<ul>
<li><a>shutdown_coordinator.py</a></li>
</ul>
<p><strong>Section sources</strong></p>
<ul>
<li><a>shutdown_coordinator.py</a></li>
<li><a>config.py</a></li>
</ul>
<h2>Configuration Examples</h2>
<h3>Minimal Configuration</h3>
<p>A minimal configuration file for local development:</p>
<pre><code class="language-json">{
  "zuki": {
    "api_key": "your_zuki_api_key",
    "base_url": "https://api.zukijourney.com/v1",
    "models": ["gpt-4o"]
  },
  "local_situation_generator": {
    "enabled": true,
    "schedule": "daily"
  },
  "main_llm_decision_maker": {
    "enabled": true,
    "preferred_model": "gpt-4o"
  }
}
</code></pre>
<h3>Production Environment Variables</h3>
<p>Recommended environment variables for production deployment:</p>
<pre><code class="language-bash"># Database Configuration
DATABASE_URL=postgresql://user:password@localhost/ravana_production

# Logging
LOG_LEVEL=WARNING

# Autonomous Behavior
CURIOSITY_CHANCE=0.1
REFLECTION_CHANCE=0.05
LOOP_SLEEP_DURATION=30

# Snake Agent
SNAKE_AGENT_ENABLED=true
SNAKE_CODING_MODEL=deepseek-coder:6.7b
SNAKE_REASONING_MODEL=llama3.1:8b

# Blog Integration
RAVANA_BLOG_ENABLED=true
RAVANA_BLOG_API_URL=https://your-blog-api.com/publish
RAVANA_BLOG_AUTH_TOKEN=your_secure_token_here

# Shutdown Configuration
GRACEFUL_SHUTDOWN_ENABLED=true
SHUTDOWN_TIMEOUT=60
STATE_PERSISTENCE_ENABLED=true
SHUTDOWN_HEALTH_CHECK_ENABLED=true
SHUTDOWN_BACKUP_ENABLED=true
SHUTDOWN_BACKUP_COUNT=10
FORCE_SHUTDOWN_AFTER=120
</code></pre>
<h3>Development Override</h3>
<p>Development-specific overrides to enable debugging:</p>
<pre><code class="language-bash"># Enable verbose logging
LOG_LEVEL=DEBUG
LOG_FORMAT=JSON

# Faster loops for testing
CURIOSITY_CHANCE=0.8
REFLECTION_CHANCE=0.5
LOOP_SLEEP_DURATION=2

# Disable resource-intensive features
SNAKE_AGENT_ENABLED=false
BLOG_ENABLED=false

# Shorter intervals for testing
DATA_COLLECTION_INTERVAL=300
EVENT_DETECTION_INTERVAL=60

# Enhanced shutdown for testing
SHUTDOWN_HEALTH_CHECK_ENABLED=false
SHUTDOWN_BACKUP_ENABLED=false
SHUTDOWN_STATE_VALIDATION_ENABLED=false
</code></pre>
<p><strong>Section sources</strong></p>
<ul>
<li><a>config.json</a></li>
<li><a>config.py</a></li>
</ul>
<h2>Common Configuration Issues</h2>
<h3>Missing Settings</h3>
<p>When required settings are missing, the system uses default values which may not be appropriate for all environments:</p>
<pre><code class="language-python"># Problem: Using default SQLite database in production
DATABASE_URL = os.environ.get("DATABASE_URL", "sqlite:///ravana_agi.db")
</code></pre>
<p><strong>Solution</strong>: Always set <code>DATABASE_URL</code> in production to use a proper database:</p>
<pre><code class="language-bash">DATABASE_URL=postgresql://user:password@host:port/database_name
</code></pre>
<h3>Type Mismatches</h3>
<p>Environment variables are strings, so type conversion errors can occur:</p>
<pre><code class="language-python"># Problem: String "true" doesn't convert to boolean correctly
SNAKE_AGENT_ENABLED = os.environ.get("SNAKE_AGENT_ENABLED", "True")
</code></pre>
<p><strong>Solution</strong>: Use proper boolean parsing:</p>
<pre><code class="language-python">SNAKE_AGENT_ENABLED = bool(os.environ.get("SNAKE_AGENT_ENABLED", "True").lower() in ["true", "1", "yes"])
</code></pre>
<h3>API Key Rate Limiting</h3>
<p>Multiple API keys help mitigate rate limiting, but improper configuration can still cause issues:</p>
<pre><code class="language-json">"gemini": {
  "api_keys": [
    {
      "id": "gemini_key_1",
      "key": "your_actual_key_here",  // Don't use placeholder keys
      "priority": 1
    }
  ],
  "rate_limit": {
    "requests_per_minute": 60  // Ensure this matches provider limits
  }
}
</code></pre>
<h3>Configuration Reload Behavior</h3>
<p>The current configuration system loads settings at startup and does not automatically reload when files change. For dynamic configuration updates, use environment variables or the VLTM configuration system.</p>
<h3>Shutdown Configuration Issues</h3>
<p>The enhanced shutdown system may encounter issues if not properly configured:</p>
<pre><code class="language-python"># Problem: Insufficient timeout for component preparation
COMPONENT_PREPARE_TIMEOUT = 1.0  # Too short for complex components

# Problem: Disabled state validation in production
SHUTDOWN_STATE_VALIDATION_ENABLED = false  # Risk of corrupted state files
</code></pre>
<p><strong>Solution</strong>: Use appropriate timeouts and enable validation in production:</p>
<pre><code class="language-bash">COMPONENT_PREPARE_TIMEOUT=30.0
SHUTDOWN_STATE_VALIDATION_ENABLED=true
SHUTDOWN_VALIDATION_ENABLED=true
</code></pre>
<p><strong>Section sources</strong></p>
<ul>
<li><a>config.py</a></li>
<li><a>config.json</a></li>
<li><a>shutdown_coordinator.py</a></li>
</ul>
<h2>Best Practices</h2>
<h3>Environment-Specific Configurations</h3>
<p>Use different configuration strategies for different environments:</p>
<p><strong>Development</strong></p>
<ul>
<li>Use environment variables in <code>.env</code> files</li>
<li>Enable verbose logging</li>
<li>Use faster loop intervals for testing</li>
<li>Disable resource-intensive features</li>
<li>Disable shutdown health checks and backups</li>
</ul>
<p><strong>Production</strong></p>
<ul>
<li>Use environment variables from secure storage</li>
<li>Set appropriate resource limits</li>
<li>Use production-grade databases</li>
<li>Implement proper error handling and monitoring</li>
<li>Enable all shutdown validation and backup features</li>
<li>Use multiple API keys with proper priorities</li>
</ul>
<h3>Secrets Management</h3>
<p>Follow these guidelines for managing sensitive data:</p>
<ol>
<li>Never commit API keys or tokens to version control</li>
<li>Use environment variables for sensitive settings</li>
<li>Use different keys for development and production</li>
<li>Rotate keys periodically</li>
<li>Restrict key permissions to minimum required</li>
<li>Use secure storage solutions for production secrets</li>
</ol>
<h3>Configuration Validation</h3>
<p>Always validate configuration settings before use:</p>
<pre><code class="language-python">def validate_configuration():
    """Validate critical configuration settings"""
    errors = []
    
    # Validate database URL
    if "sqlite" in Config.DATABASE_URL and not Config.DATABASE_URL.startswith("sqlite"):
        errors.append("Invalid SQLite database URL format")
    
    # Validate model names
    valid_models = ["gpt-4o", "deepseek-coder", "llama3.1"]
    if Config.SNAKE_CODING_MODEL["model_name"] not in valid_models:
        errors.append(f"Invalid coding model: {Config.SNAKE_CODING_MODEL['model_name']}")
    
    # Validate shutdown timeouts
    if Config.FORCE_SHUTDOWN_AFTER &#x3C; Config.SHUTDOWN_TIMEOUT:
        errors.append("FORCE_SHUTDOWN_AFTER must be greater than SHUTDOWN_TIMEOUT")
    
    return errors
</code></pre>
<h3>Documentation and Comments</h3>
<p>Maintain clear documentation for all configuration options:</p>
<pre><code class="language-python"># Autonomous Loop Settings
# Controls the frequency and probability of autonomous behaviors
CURIOSITY_CHANCE = float(os.environ.get("CURIOSITY_CHANCE", 0.3))  # Probability of curiosity-driven actions
REFLECTION_CHANCE = float(os.environ.get("REFLECTION_CHANCE", 0.1))  # Probability of self-reflection
LOOP_SLEEP_DURATION = int(os.environ.get("LOOP_SLEEP_DURATION", 10))  # Seconds between loops

# Enhanced Shutdown Configuration
# Controls the graceful shutdown process with multiple phases and validation
SHUTDOWN_HEALTH_CHECK_ENABLED = bool(os.environ.get("SHUTDOWN_HEALTH_CHECK_ENABLED", "True").lower() in ["true", "1", "yes"])  # Enable pre-shutdown health checks
SHUTDOWN_BACKUP_ENABLED = bool(os.environ.get("SHUTDOWN_BACKUP_ENABLED", "True").lower() in ["true", "1", "yes"])  # Create backups during shutdown
SHUTDOWN_BACKUP_COUNT = int(os.environ.get("SHUTDOWN_BACKUP_COUNT", 5))  # Number of backup files to retain
</code></pre>
<p><strong>Section sources</strong></p>
<ul>
<li><a>config.py</a></li>
</ul>
<p><strong>Referenced Files in This Document</strong></p>
<ul>
<li><a>config.json</a> - <em>Updated with new Gemini API keys in commit 281c68a3</em></li>
<li><a>config.py</a> - <em>Enhanced with new shutdown settings in commit 5d169a6a</em></li>
<li><a>shutdown_coordinator.py</a> - <em>Added enhanced shutdown functionality</em></li>
<li><a>llm.py</a> - <em>Gemini key management implementation</em></li>
<li><a>pyproject.toml</a> - <em>Updated with new dependencies</em></li>
</ul>
</div></article><div class="w-full md:w-64 flex-shrink-0"></div></div></main></div><footer class="bg-wiki-dark text-white p-4"><div class="container mx-auto text-center"><p>Â© <!-- -->2025<!-- --> RAVANA AGI System Documentation</p></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"doc":{"slug":"Configuration","title":"Configuration","content":"\u003ch1\u003eConfiguration\u003c/h1\u003e\n\u003ch2\u003eUpdate Summary\u003c/h2\u003e\n\u003cp\u003e\u003cstrong\u003eChanges Made\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eAdded comprehensive documentation for enhanced graceful shutdown configuration options\u003c/li\u003e\n\u003cli\u003eUpdated LLM provider configuration section with new Gemini API key details\u003c/li\u003e\n\u003cli\u003eAdded new section on shutdown coordinator functionality and phases\u003c/li\u003e\n\u003cli\u003eUpdated environment variables section with new shutdown-related settings\u003c/li\u003e\n\u003cli\u003eAdded new diagram for shutdown process flow\u003c/li\u003e\n\u003cli\u003eUpdated referenced files list with new and modified files\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eTable of Contents\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\u003ca href=\"#configuration-overview\"\u003eConfiguration Overview\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#core-configuration-files\"\u003eCore Configuration Files\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#config-class-implementation\"\u003eConfig Class Implementation\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#llm-provider-configuration\"\u003eLLM Provider Configuration\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#module-specific-settings\"\u003eModule-Specific Settings\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#configuration-loading-and-validation\"\u003eConfiguration Loading and Validation\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#environment-variables-and-overrides\"\u003eEnvironment Variables and Overrides\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#sensitive-data-handling\"\u003eSensitive Data Handling\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#advanced-configuration-management\"\u003eAdvanced Configuration Management\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#configuration-examples\"\u003eConfiguration Examples\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#common-configuration-issues\"\u003eCommon Configuration Issues\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#best-practices\"\u003eBest Practices\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003eConfiguration Overview\u003c/h2\u003e\n\u003cp\u003eThe RAVANA system implements a comprehensive configuration management system that combines JSON configuration files with environment variable overrides. The system supports multiple configuration sources, including global settings, module-specific configurations, and runtime environment variables. This layered approach enables flexible deployment across different environments while maintaining security and consistency.\u003c/p\u003e\n\u003cp\u003eThe configuration system serves as the central nervous system for the AGI framework, controlling everything from LLM provider selection to emotional intelligence parameters and autonomous behavior patterns. Two primary mechanisms work together: the static \u003ccode\u003econfig.json\u003c/code\u003e files that define default settings and provider configurations, and the dynamic \u003ccode\u003eConfig\u003c/code\u003e class that loads, validates, and provides access to settings throughout the application.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eSection sources\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca\u003econfig.py\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca\u003econfig.json\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eCore Configuration Files\u003c/h2\u003e\n\u003cp\u003eThe system utilizes multiple JSON configuration files to manage different aspects of the AGI framework. The primary configuration file \u003ccode\u003ecore/config.json\u003c/code\u003e contains LLM provider credentials, API endpoints, and model availability information. This file serves as the authoritative source for external service integrations.\u003c/p\u003e\n\u003cp\u003e``mermaid\ngraph TD\nA[Configuration Files] --\u003e B[core/config.json]\nA --\u003e C[modules/conversational_ai/config.json]\nA --\u003e D[modules/emotional_intellegence/config.json]\nA --\u003e E[modules/emotional_intellegence/persona.json]\nB --\u003e F[LLM Providers]\nB --\u003e G[API Keys]\nB --\u003e H[Model Lists]\nC --\u003e I[Platform Integration]\nC --\u003e J[Communication Settings]\nD --\u003e K[Emotional Triggers]\nD --\u003e L[Behavior Influences]\nE --\u003e M[Persona Definitions]\nE --\u003e N[Mood Multipliers]\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\n**Diagram sources**\n- [config.json](file://c:\\Users\\ASUS\\Documents\\GitHub\\RAVANA\\core\\config.json#L1-L193)\n- [conversational_ai/config.json](file://c:\\Users\\ASUS\\Documents\\GitHub\\RAVANA\\modules\\conversational_ai\\config.json#L1-L27)\n- [emotional_intellegence/config.json](file://c:\\Users\\ASUS\\Documents\\GitHub\\RAVANA\\modules\\emotional_intellegence\\config.json#L1-L202)\n- [persona.json](file://c:\\Users\\ASUS\\Documents\\GitHub\\RAVANA\\modules\\emotional_intellegence\\persona.json#L1-L86)\n\n**Section sources**\n- [config.json](file://c:\\Users\\ASUS\\Documents\\GitHub\\RAVANA\\core\\config.json#L1-L193)\n- [conversational_ai/config.json](file://c:\\Users\\ASUS\\Documents\\GitHub\\RAVANA\\modules\\conversational_ai\\config.json#L1-L27)\n- [emotional_intellegence/config.json](file://c:\\Users\\ASUS\\Documents\\GitHub\\RAVANA\\modules\\emotional_intellegence\\config.json#L1-L202)\n- [persona.json](file://c:\\Users\\ASUS\\Documents\\GitHub\\RAVANA\\modules\\emotional_intellegence\\persona.json#L1-L86)\n\n## Config Class Implementation\n\nThe `Config` class in `core/config.py` serves as the central configuration manager, providing a unified interface for accessing settings from both JSON files and environment variables. This class implements a hierarchical override system where environment variables take precedence over JSON file values, enabling flexible deployment configurations.\n\n```python\nclass Config:\n    DATABASE_URL = os.environ.get(\"DATABASE_URL\", \"sqlite:///ravana_agi.db\")\n    LOG_LEVEL = os.environ.get(\"LOG_LEVEL\", \"INFO\")\n    CURIOSITY_CHANCE = float(os.environ.get(\"CURIOSITY_CHANCE\", 0.3))\n    # ... additional settings\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe class uses Python's \u003ccode\u003eos.environ.get()\u003c/code\u003e method to retrieve environment variables with fallback to default values. Type conversion is explicitly handled for different data types: strings remain as-is, numeric values are converted using \u003ccode\u003eint()\u003c/code\u003e or \u003ccode\u003efloat()\u003c/code\u003e, and boolean values are parsed from string representations (\"true\", \"1\", \"yes\") to Python boolean values.\u003c/p\u003e\n\u003cp\u003e``mermaid\nclassDiagram\nclass Config {\n+DATABASE_URL : str\n+LOG_LEVEL : str\n+CURIOSITY_CHANCE : float\n+REFLECTION_CHANCE : float\n+LOOP_SLEEP_DURATION : int\n+EMOTIONAL_PERSONA : str\n+SNAKE_AGENT_ENABLED : bool\n+BLOG_ENABLED : bool\n+get_setting(key : str) : Any\n+validate_configuration() : List[str]\n}\nclass ConfigLoader {\n+load_from_json(path : str) : Dict\n+load_from_env(prefix : str) : Dict\n+merge_configurations() : Dict\n+validate_settings(config : Dict) : bool\n}\nConfig \"1\" -- \"1\" ConfigLoader : uses\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\n**Diagram sources**\n- [config.py](file://c:\\Users\\ASUS\\Documents\\GitHub\\RAVANA\\core\\config.py#L2-L182)\n\n**Section sources**\n- [config.py](file://c:\\Users\\ASUS\\Documents\\GitHub\\RAVANA\\core\\config.py#L2-L182)\n\n## LLM Provider Configuration\n\nThe system supports multiple LLM providers through the `core/config.json` file, which defines API endpoints, authentication credentials, and available models for each provider. This configuration enables the system to route requests to different providers based on model availability, cost considerations, and performance requirements.\n\n### Provider Configuration Structure\n\nEach provider in the configuration file follows a consistent structure with the following key components:\n\n- **api_key**: Authentication token for the provider API\n- **base_url**: Endpoint URL for API requests\n- **models**: List of available models that can be used\n\n```json\n{\n  \"zuki\": {\n    \"api_key\": \"zu-ab9fba2aeef85c7ecb217b00ce7ca1fe\",\n    \"base_url\": \"https://api.zukijourney.com/v1\",\n    \"models\": [\n      \"gpt-4o:online\",\n      \"gpt-4o\",\n      \"deepseek-chat\",\n      \"deepseek-reasoner\"\n    ]\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eMulti-Key Fallback System\u003c/h3\u003e\n\u003cp\u003eThe Gemini provider implements a sophisticated multi-key fallback system that allows the system to rotate through multiple API keys when rate limits are reached:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-json\"\u003e\"gemini\": {\n  \"api_keys\": [\n    {\n      \"id\": \"gemini_key_1\",\n      \"key\": \"AIzaSyBW-aVU-x7JCjBJVVKjPGUacups0-GBHvQ\",\n      \"priority\": 1,\n      \"failure_count\": 0,\n      \"last_success\": null\n    },\n    {\n      \"id\": \"gemini_key_2\",\n      \"key\": \"AIzaSyBW-aVU-x7JCjBJVVKjPGUacups0-GBHvQ\",\n      \"priority\": 2,\n      \"failure_count\": 0,\n      \"last_success\": null\n    },\n    {\n      \"id\": \"gemini_key_3\",\n      \"key\": \"AIzaSyC8hTaXE6jkWDFZyZDybFEoHfPR-4VSV-k\",\n      \"priority\": 3,\n      \"failure_count\": 0,\n      \"last_success\": null\n    },\n    {\n      \"id\": \"gemini_key_10\",\n      \"key\": \"AIzaSyBCQic67-TJmSXUVTCiW3SFU5fLZx7enII\",\n      \"priority\": 10,\n      \"failure_count\": 0,\n      \"last_success\": null\n    }\n  ],\n  \"rate_limit\": {\n    \"requests_per_minute\": 60,\n    \"cooldown_period\": 300,\n    \"max_retries\": 3,\n    \"backoff_factor\": 2.0\n  },\n  \"fallback\": {\n    \"enabled\": true,\n    \"timeout\": 30,\n    \"max_key_failures\": 5\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis configuration enables resilient operation by automatically switching to backup keys when the primary key encounters rate limiting or failures. The recent update has expanded the Gemini configuration to include 10 API keys with priority-based rotation.\u003c/p\u003e\n\u003cp\u003e``mermaid\nsequenceDiagram\nparticipant Client as \"Application\"\nparticipant Config as \"Config System\"\nparticipant Provider as \"LLM Provider\"\nClient-\u003e\u003eConfig : Request model usage\nConfig-\u003e\u003eConfig : Select provider based on model availability\nConfig-\u003e\u003eProvider : Send API request with primary key\nalt Rate limit exceeded\nProvider--\u003e\u003eConfig : 429 Too Many Requests\nConfig-\u003e\u003eConfig : Increment failure count\nConfig-\u003e\u003eConfig : Select next priority key\nConfig-\u003e\u003eProvider : Retry with backup key\nelse Success\nProvider--\u003e\u003eConfig : 200 OK with response\nend\nConfig--\u003e\u003eClient : Return response or error\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\n**Diagram sources**\n- [config.json](file://c:\\Users\\ASUS\\Documents\\GitHub\\RAVANA\\core\\config.json#L1-L193)\n- [llm.py](file://c:\\Users\\ASUS\\Documents\\GitHub\\RAVANA\\core\\llm.py#L46-L114)\n\n**Section sources**\n- [config.json](file://c:\\Users\\ASUS\\Documents\\GitHub\\RAVANA\\core\\config.json#L1-L193)\n- [llm.py](file://c:\\Users\\ASUS\\Documents\\GitHub\\RAVANA\\core\\llm.py#L46-L114)\n\n## Module-Specific Settings\n\nDifferent modules within the RAVANA system have specialized configuration requirements that are managed through dedicated configuration files and settings.\n\n### Emotional Intelligence Configuration\n\nThe emotional intelligence module uses two configuration files to define emotional states and persona behaviors:\n\n```json\n{\n  \"emotional_intelligence_config\": {\n    \"primary_emotions\": {\n      \"joy_based\": [\"Confident\", \"Excited\", \"Inspired\", \"Satisfied\"],\n      \"interest_based\": [\"Curious\", \"Reflective\", \"Intrigued\", \"Engaged\"]\n    },\n    \"secondary_emotions\": [\n      \"Hopeful\", \"Grateful\", \"Proud\", \"Guilty\"\n    ],\n    \"emotion_intensity_levels\": {\n      \"low\": [0.0, 0.33],\n      \"medium\": [0.34, 0.66],\n      \"high\": [0.67, 1.0]\n    },\n    \"triggers\": {\n      \"new_discovery\": \"The agent has discovered new information or learned something novel.\",\n      \"task_completed\": \"A task or goal has been successfully completed.\"\n    },\n    \"mood_updates\": {\n      \"new_discovery\": {\n        \"Curious\": 0.2,\n        \"Excited\": 0.15,\n        \"Inspired\": 0.1\n      }\n    },\n    \"behavior_influences\": {\n      \"Confident\": {\n        \"risk_tolerance\": \"high\",\n        \"exploration_tendency\": \"high\",\n        \"planning_depth\": \"medium\"\n      }\n    }\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eConversational AI Configuration\u003c/h3\u003e\n\u003cp\u003eThe conversational AI module manages platform integrations and communication settings:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-json\"\u003e{\n  \"discord_token\": \"\",\n  \"telegram_token\": \"\",\n  \"platforms\": {\n    \"discord\": {\n      \"enabled\": true,\n      \"command_prefix\": \"!\"\n    },\n    \"telegram\": {\n      \"enabled\": true,\n      \"command_prefix\": \"/\"\n    }\n  },\n  \"emotional_intelligence\": {\n    \"default_persona\": \"Balanced\",\n    \"mood_decay_rate\": 0.05,\n    \"context_window_hours\": 24\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003ePersona Configuration\u003c/h3\u003e\n\u003cp\u003eThe \u003ccode\u003epersona.json\u003c/code\u003e file defines different personality types and their emotional response patterns:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-json\"\u003e{\n  \"personas\": {\n    \"Optimistic\": {\n      \"mood_multipliers\": {\n        \"Confident\": 1.5,\n        \"Curious\": 1.2,\n        \"Frustrated\": 0.5\n      },\n      \"description\": \"Sees the glass as half full. Bounces back from setbacks quickly.\",\n      \"adaptation_rate\": 0.1\n    },\n    \"Analytical\": {\n      \"mood_multipliers\": {\n        \"Confident\": 1.1,\n        \"Curious\": 1.8,\n        \"Frustrated\": 0.8\n      },\n      \"description\": \"Driven by data and logic. Less prone to strong emotional swings.\",\n      \"adaptation_rate\": 0.15\n    }\n  },\n  \"default_persona\": \"Balanced\"\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eSection sources\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca\u003eemotional_intellegence/config.json\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca\u003econversational_ai/config.json\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca\u003epersona.json\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eConfiguration Loading and Validation\u003c/h2\u003e\n\u003cp\u003eThe configuration system follows a well-defined process for loading and validating settings from multiple sources. The \u003ccode\u003eConfig\u003c/code\u003e class automatically loads settings in the following priority order:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eEnvironment variables (highest priority)\u003c/li\u003e\n\u003cli\u003eJSON configuration files\u003c/li\u003e\n\u003cli\u003eHard-coded default values\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3\u003eConfiguration Validation\u003c/h3\u003e\n\u003cp\u003eThe system includes built-in validation for critical configuration parameters. For example, the Snake Agent configuration validates model settings and resource limits:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eSNAKE_CODING_MODEL = {\n    \"provider\": \"ollama\",\n    \"model_name\": os.environ.get(\"SNAKE_CODING_MODEL\", \"gpt-oss:20b\"),\n    \"temperature\": float(os.environ.get(\"SNAKE_CODING_TEMPERATURE\", \"0.1\")),\n    \"max_tokens\": None if os.environ.get(\"SNAKE_CODING_MAX_TOKENS\", \"unlimited\").lower() in [\"unlimited\", \"none\", \"-1\"] else int(os.environ.get(\"SNAKE_CODING_MAX_TOKENS\", \"4096\")),\n    \"timeout\": int(os.environ.get(\"SNAKE_OLLAMA_TIMEOUT\", 3000))\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eConfiguration Access Pattern\u003c/h3\u003e\n\u003cp\u003eComponents throughout the system access configuration values using direct attribute access:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003efrom core.config import Config\n\n# Access configuration values\nif Config.BLOG_ENABLED:\n    publish_content()\n\nmodel_name = Config.SNAKE_CODING_MODEL[\"model_name\"]\ntimeout = Config.SNAKE_OLLAMA_TIMEOUT\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis pattern is used consistently across 25+ files in the codebase, demonstrating the central role of the Config class in the system architecture.\u003c/p\u003e\n\u003cp\u003e``mermaid\nflowchart TD\nA[Start] --\u003e B[Load Environment Variables]\nB --\u003e C{Variable Exists?}\nC --\u003e |Yes| D[Use Environment Value]\nC --\u003e |No| E[Use JSON File Value]\nE --\u003e F{Value in JSON?}\nF --\u003e |Yes| G[Use JSON Value]\nF --\u003e |No| H[Use Default Value]\nD --\u003e I[Convert to Proper Type]\nG --\u003e I\nH --\u003e I\nI --\u003e J[Store in Config Class]\nJ --\u003e K[Application Uses Config]\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\n**Diagram sources**\n- [config.py](file://c:\\Users\\ASUS\\Documents\\GitHub\\RAVANA\\core\\config.py#L2-L182)\n\n**Section sources**\n- [config.py](file://c:\\Users\\ASUS\\Documents\\GitHub\\RAVANA\\core\\config.py#L2-L182)\n\n## Environment Variables and Overrides\n\nThe system extensively uses environment variables to enable runtime configuration without modifying configuration files. This approach supports secure deployment practices by keeping sensitive information out of version control.\n\n### Override Mechanism\n\nThe override mechanism follows a simple pattern for all configuration values:\n\n```python\n# Pattern: os.environ.get(\"ENV_VAR_NAME\", \"default_value\")\nLOG_LEVEL = os.environ.get(\"LOG_LEVEL\", \"INFO\")\nCURIOSITY_CHANCE = float(os.environ.get(\"CURIOSITY_CHANCE\", 0.3))\nSNAKE_AGENT_ENABLED = bool(os.environ.get(\"SNAKE_AGENT_ENABLED\", \"True\").lower() in [\"true\", \"1\", \"yes\"])\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eCommon Environment Variables\u003c/h3\u003e\n\u003cp\u003eThe system recognizes numerous environment variables for different configuration aspects:\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eAutonomous Behavior\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eCURIOSITY_CHANCE\u003c/code\u003e: Probability of initiating curiosity-driven actions (default: 0.3)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eREFLECTION_CHANCE\u003c/code\u003e: Probability of self-reflection (default: 0.1)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eLOOP_SLEEP_DURATION\u003c/code\u003e: Delay between autonomous loops (default: 10 seconds)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eSnake Agent Configuration\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eSNAKE_AGENT_ENABLED\u003c/code\u003e: Whether the Snake Agent is active (default: True)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eSNAKE_CODING_MODEL\u003c/code\u003e: Ollama model for coding tasks (default: gpt-oss:20b)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eSNAKE_REASONING_MODEL\u003c/code\u003e: Ollama model for reasoning tasks (default: deepseek-r1:7b)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eBlog Integration\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eRAVANA_BLOG_ENABLED\u003c/code\u003e: Whether blog publishing is enabled (default: True)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eRAVANA_BLOG_API_URL\u003c/code\u003e: Endpoint for blog publishing (default: \u003ca href=\"https://ravana-blog.netlify.app/api/publish\"\u003ehttps://ravana-blog.netlify.app/api/publish\u003c/a\u003e)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eRAVANA_BLOG_AUTH_TOKEN\u003c/code\u003e: Authentication token for blog API\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eShutdown Configuration\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eGRACEFUL_SHUTDOWN_ENABLED\u003c/code\u003e: Whether to perform graceful shutdown (default: True)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eSHUTDOWN_TIMEOUT\u003c/code\u003e: Maximum time for shutdown process (default: 30 seconds)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eSTATE_PERSISTENCE_ENABLED\u003c/code\u003e: Whether to save state on shutdown (default: True)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eSHUTDOWN_HEALTH_CHECK_ENABLED\u003c/code\u003e: Whether to perform health checks before shutdown (default: True)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eSHUTDOWN_BACKUP_ENABLED\u003c/code\u003e: Whether to create backups during shutdown (default: True)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eSHUTDOWN_BACKUP_COUNT\u003c/code\u003e: Number of backup files to retain (default: 5)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eSHUTDOWN_STATE_VALIDATION_ENABLED\u003c/code\u003e: Whether to validate state data before persistence (default: True)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eSHUTDOWN_VALIDATION_ENABLED\u003c/code\u003e: Whether to validate state file integrity (default: True)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eSHUTDOWN_COMPRESSION_ENABLED\u003c/code\u003e: Whether to enable compression during shutdown (default: True)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eCOMPONENT_PREPARE_TIMEOUT\u003c/code\u003e: Timeout for component preparation phase (default: 10.0 seconds)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eCOMPONENT_SHUTDOWN_TIMEOUT\u003c/code\u003e: Timeout for component shutdown phase (default: 15.0 seconds)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eMEMORY_SERVICE_SHUTDOWN_TIMEOUT\u003c/code\u003e: Timeout for memory service shutdown (default: 15 seconds)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ePOSTGRES_CONNECTION_TIMEOUT\u003c/code\u003e: Timeout for PostgreSQL connection (default: 10 seconds)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eCHROMADB_PERSIST_ON_SHUTDOWN\u003c/code\u003e: Whether to persist ChromaDB data on shutdown (default: True)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eTEMP_FILE_CLEANUP_ENABLED\u003c/code\u003e: Whether to clean up temporary files on shutdown (default: True)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eACTION_CACHE_PERSIST\u003c/code\u003e: Whether to persist action cache on shutdown (default: True)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eRESOURCE_CLEANUP_TIMEOUT\u003c/code\u003e: Timeout for resource cleanup (default: 10 seconds)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eDATABASE_CLEANUP_TIMEOUT\u003c/code\u003e: Timeout for database cleanup (default: 15 seconds)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eFORCE_SHUTDOWN_AFTER\u003c/code\u003e: Maximum time before forcing shutdown (default: 60 seconds)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eSection sources\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca\u003econfig.py\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eSensitive Data Handling\u003c/h2\u003e\n\u003cp\u003eThe system implements multiple strategies for handling sensitive configuration data securely.\u003c/p\u003e\n\u003ch3\u003eAPI Key Management\u003c/h3\u003e\n\u003cp\u003eAPI keys are stored in the \u003ccode\u003econfig.json\u003c/code\u003e file alongside other provider configuration:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-json\"\u003e{\n  \"zuki\": {\n    \"api_key\": \"zu-ab9fba2aeef85c7ecb217b00ce7ca1fe\",\n    \"base_url\": \"https://api.zukijourney.com/v1\"\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eFor production deployments, these values should be overridden using environment variables to prevent accidental exposure in version control.\u003c/p\u003e\n\u003ch3\u003eToken Security\u003c/h3\u003e\n\u003cp\u003ePlatform integration tokens are stored in module-specific configuration files:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-json\"\u003e{\n  \"discord_token\": \"\",\n  \"telegram_token\": \"\"\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThese tokens should be managed using environment variables in production environments.\u003c/p\u003e\n\u003ch3\u003eSecure Defaults\u003c/h3\u003e\n\u003cp\u003eThe system implements secure defaults for sensitive settings:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003e# Blog authentication token (should be overridden in production)\nBLOG_AUTH_TOKEN = os.environ.get(\"RAVANA_BLOG_AUTH_TOKEN\", \"ravana_secret_token_2024\")\n\n# Snake Agent safety configuration\nSNAKE_APPROVAL_REQUIRED = bool(os.environ.get(\"SNAKE_APPROVAL_REQUIRED\", \"True\").lower() in [\"true\", \"1\", \"yes\"])\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe default authentication token is intentionally weak to encourage users to set their own secure values.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eSection sources\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca\u003econfig.json\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca\u003econversational_ai/config.json\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca\u003econfig.py\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eAdvanced Configuration Management\u003c/h2\u003e\n\u003cp\u003eThe system includes advanced configuration management capabilities through the VLTM (Very Long-Term Memory) configuration system and enhanced shutdown coordinator.\u003c/p\u003e\n\u003ch3\u003eEnhanced Shutdown Configuration\u003c/h3\u003e\n\u003cp\u003eThe system now features a comprehensive shutdown configuration system with multiple phases and validation steps. The \u003ccode\u003eshutdown_coordinator.py\u003c/code\u003e file implements a multi-phase shutdown process:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eclass ShutdownCoordinator:\n    async def initiate_shutdown(self, reason: str = \"manual\"):\n        \"\"\"Initiate the graceful shutdown process.\"\"\"\n        # Execute shutdown phases in sequence\n        await self._execute_shutdown_phases()\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eShutdown Process Flow\u003c/h3\u003e\n\u003cp\u003eThe enhanced shutdown process follows a structured sequence of phases:\u003c/p\u003e\n\u003cp\u003e``mermaid\ngraph TD\nA[Initiate Shutdown] --\u003e B[Pre-Shutdown Validation]\nB --\u003e C[Signal Received]\nC --\u003e D[Component Notification]\nD --\u003e E[Stop Background Tasks]\nE --\u003e F[Resource Cleanup]\nF --\u003e G[Service Shutdown]\nG --\u003e H[State Persistence]\nH --\u003e I[Final Validation]\nI --\u003e J[Shutdown Complete]\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\n### Shutdown Phase Configuration\n\nThe system supports configurable timeouts and behaviors for each shutdown phase:\n\n```python\n# Shutdown phase configuration\nSHUTDOWN_HEALTH_CHECK_ENABLED = bool(os.environ.get(\"SHUTDOWN_HEALTH_CHECK_ENABLED\", \"True\").lower() in [\"true\", \"1\", \"yes\"])\nSHUTDOWN_BACKUP_ENABLED = bool(os.environ.get(\"SHUTDOWN_BACKUP_ENABLED\", \"True\").lower() in [\"true\", \"1\", \"yes\"])\nSHUTDOWN_BACKUP_COUNT = int(os.environ.get(\"SHUTDOWN_BACKUP_COUNT\", 5))\nSHUTDOWN_STATE_VALIDATION_ENABLED = bool(os.environ.get(\"SHUTDOWN_STATE_VALIDATION_ENABLED\", \"True\").lower() in [\"true\", \"1\", \"yes\"])\nSHUTDOWN_VALIDATION_ENABLED = bool(os.environ.get(\"SHUTDOWN_VALIDATION_ENABLED\", \"True\").lower() in [\"true\", \"1\", \"yes\"])\nSHUTDOWN_COMPRESSION_ENABLED = bool(os.environ.get(\"SHUTDOWN_COMPRESSION_ENABLED\", \"True\").lower() in [\"true\", \"1\", \"yes\"])\nCOMPONENT_PREPARE_TIMEOUT = float(os.environ.get(\"COMPONENT_PREPARE_TIMEOUT\", 10.0))\nCOMPONENT_SHUTDOWN_TIMEOUT = float(os.environ.get(\"COMPONENT_SHUTDOWN_TIMEOUT\", 15.0))\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eShutdown Lifecycle\u003c/h3\u003e\n\u003cp\u003eThe system manages the full lifecycle of shutdown operations:\u003c/p\u003e\n\u003cp\u003e``mermaid\nstateDiagram-v2\n[\u003cem\u003e] --\u003e PreShutdownValidation\nPreShutdownValidation --\u003e SignalReceived : health checks passed\nSignalReceived --\u003e ComponentNotification : signal sent\nComponentNotification --\u003e TasksStopping : components notified\nTasksStopping --\u003e ResourceCleanup : tasks stopped\nResourceCleanup --\u003e ServiceShutdown : resources cleaned\nServiceShutdown --\u003e StatePersistence : services shutdown\nStatePersistence --\u003e FinalValidation : state persisted\nFinalValidation --\u003e ShutdownComplete : validation passed\nShutdownComplete --\u003e [\u003c/em\u003e]\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\n### Shutdown History and Logging\n\nThe system maintains detailed logs of shutdown operations:\n\n```python\ndef _log_shutdown_summary(self):\n    \"\"\"Log a summary of the shutdown process.\"\"\"\n    log_data = {\n        \"shutdown_summary\": self.shutdown_state,\n        \"duration_seconds\": elapsed,\n        \"timestamp\": datetime.utcnow().isoformat()\n    }\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis feature enables auditing and troubleshooting of shutdown operations.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eDiagram sources\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca\u003eshutdown_coordinator.py\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eSection sources\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca\u003eshutdown_coordinator.py\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca\u003econfig.py\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eConfiguration Examples\u003c/h2\u003e\n\u003ch3\u003eMinimal Configuration\u003c/h3\u003e\n\u003cp\u003eA minimal configuration file for local development:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-json\"\u003e{\n  \"zuki\": {\n    \"api_key\": \"your_zuki_api_key\",\n    \"base_url\": \"https://api.zukijourney.com/v1\",\n    \"models\": [\"gpt-4o\"]\n  },\n  \"local_situation_generator\": {\n    \"enabled\": true,\n    \"schedule\": \"daily\"\n  },\n  \"main_llm_decision_maker\": {\n    \"enabled\": true,\n    \"preferred_model\": \"gpt-4o\"\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eProduction Environment Variables\u003c/h3\u003e\n\u003cp\u003eRecommended environment variables for production deployment:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Database Configuration\nDATABASE_URL=postgresql://user:password@localhost/ravana_production\n\n# Logging\nLOG_LEVEL=WARNING\n\n# Autonomous Behavior\nCURIOSITY_CHANCE=0.1\nREFLECTION_CHANCE=0.05\nLOOP_SLEEP_DURATION=30\n\n# Snake Agent\nSNAKE_AGENT_ENABLED=true\nSNAKE_CODING_MODEL=deepseek-coder:6.7b\nSNAKE_REASONING_MODEL=llama3.1:8b\n\n# Blog Integration\nRAVANA_BLOG_ENABLED=true\nRAVANA_BLOG_API_URL=https://your-blog-api.com/publish\nRAVANA_BLOG_AUTH_TOKEN=your_secure_token_here\n\n# Shutdown Configuration\nGRACEFUL_SHUTDOWN_ENABLED=true\nSHUTDOWN_TIMEOUT=60\nSTATE_PERSISTENCE_ENABLED=true\nSHUTDOWN_HEALTH_CHECK_ENABLED=true\nSHUTDOWN_BACKUP_ENABLED=true\nSHUTDOWN_BACKUP_COUNT=10\nFORCE_SHUTDOWN_AFTER=120\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eDevelopment Override\u003c/h3\u003e\n\u003cp\u003eDevelopment-specific overrides to enable debugging:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Enable verbose logging\nLOG_LEVEL=DEBUG\nLOG_FORMAT=JSON\n\n# Faster loops for testing\nCURIOSITY_CHANCE=0.8\nREFLECTION_CHANCE=0.5\nLOOP_SLEEP_DURATION=2\n\n# Disable resource-intensive features\nSNAKE_AGENT_ENABLED=false\nBLOG_ENABLED=false\n\n# Shorter intervals for testing\nDATA_COLLECTION_INTERVAL=300\nEVENT_DETECTION_INTERVAL=60\n\n# Enhanced shutdown for testing\nSHUTDOWN_HEALTH_CHECK_ENABLED=false\nSHUTDOWN_BACKUP_ENABLED=false\nSHUTDOWN_STATE_VALIDATION_ENABLED=false\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eSection sources\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca\u003econfig.json\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca\u003econfig.py\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eCommon Configuration Issues\u003c/h2\u003e\n\u003ch3\u003eMissing Settings\u003c/h3\u003e\n\u003cp\u003eWhen required settings are missing, the system uses default values which may not be appropriate for all environments:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003e# Problem: Using default SQLite database in production\nDATABASE_URL = os.environ.get(\"DATABASE_URL\", \"sqlite:///ravana_agi.db\")\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eSolution\u003c/strong\u003e: Always set \u003ccode\u003eDATABASE_URL\u003c/code\u003e in production to use a proper database:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003eDATABASE_URL=postgresql://user:password@host:port/database_name\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eType Mismatches\u003c/h3\u003e\n\u003cp\u003eEnvironment variables are strings, so type conversion errors can occur:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003e# Problem: String \"true\" doesn't convert to boolean correctly\nSNAKE_AGENT_ENABLED = os.environ.get(\"SNAKE_AGENT_ENABLED\", \"True\")\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eSolution\u003c/strong\u003e: Use proper boolean parsing:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eSNAKE_AGENT_ENABLED = bool(os.environ.get(\"SNAKE_AGENT_ENABLED\", \"True\").lower() in [\"true\", \"1\", \"yes\"])\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eAPI Key Rate Limiting\u003c/h3\u003e\n\u003cp\u003eMultiple API keys help mitigate rate limiting, but improper configuration can still cause issues:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-json\"\u003e\"gemini\": {\n  \"api_keys\": [\n    {\n      \"id\": \"gemini_key_1\",\n      \"key\": \"your_actual_key_here\",  // Don't use placeholder keys\n      \"priority\": 1\n    }\n  ],\n  \"rate_limit\": {\n    \"requests_per_minute\": 60  // Ensure this matches provider limits\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eConfiguration Reload Behavior\u003c/h3\u003e\n\u003cp\u003eThe current configuration system loads settings at startup and does not automatically reload when files change. For dynamic configuration updates, use environment variables or the VLTM configuration system.\u003c/p\u003e\n\u003ch3\u003eShutdown Configuration Issues\u003c/h3\u003e\n\u003cp\u003eThe enhanced shutdown system may encounter issues if not properly configured:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003e# Problem: Insufficient timeout for component preparation\nCOMPONENT_PREPARE_TIMEOUT = 1.0  # Too short for complex components\n\n# Problem: Disabled state validation in production\nSHUTDOWN_STATE_VALIDATION_ENABLED = false  # Risk of corrupted state files\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eSolution\u003c/strong\u003e: Use appropriate timeouts and enable validation in production:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003eCOMPONENT_PREPARE_TIMEOUT=30.0\nSHUTDOWN_STATE_VALIDATION_ENABLED=true\nSHUTDOWN_VALIDATION_ENABLED=true\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eSection sources\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca\u003econfig.py\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca\u003econfig.json\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca\u003eshutdown_coordinator.py\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eBest Practices\u003c/h2\u003e\n\u003ch3\u003eEnvironment-Specific Configurations\u003c/h3\u003e\n\u003cp\u003eUse different configuration strategies for different environments:\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eDevelopment\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eUse environment variables in \u003ccode\u003e.env\u003c/code\u003e files\u003c/li\u003e\n\u003cli\u003eEnable verbose logging\u003c/li\u003e\n\u003cli\u003eUse faster loop intervals for testing\u003c/li\u003e\n\u003cli\u003eDisable resource-intensive features\u003c/li\u003e\n\u003cli\u003eDisable shutdown health checks and backups\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eProduction\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eUse environment variables from secure storage\u003c/li\u003e\n\u003cli\u003eSet appropriate resource limits\u003c/li\u003e\n\u003cli\u003eUse production-grade databases\u003c/li\u003e\n\u003cli\u003eImplement proper error handling and monitoring\u003c/li\u003e\n\u003cli\u003eEnable all shutdown validation and backup features\u003c/li\u003e\n\u003cli\u003eUse multiple API keys with proper priorities\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eSecrets Management\u003c/h3\u003e\n\u003cp\u003eFollow these guidelines for managing sensitive data:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eNever commit API keys or tokens to version control\u003c/li\u003e\n\u003cli\u003eUse environment variables for sensitive settings\u003c/li\u003e\n\u003cli\u003eUse different keys for development and production\u003c/li\u003e\n\u003cli\u003eRotate keys periodically\u003c/li\u003e\n\u003cli\u003eRestrict key permissions to minimum required\u003c/li\u003e\n\u003cli\u003eUse secure storage solutions for production secrets\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3\u003eConfiguration Validation\u003c/h3\u003e\n\u003cp\u003eAlways validate configuration settings before use:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003edef validate_configuration():\n    \"\"\"Validate critical configuration settings\"\"\"\n    errors = []\n    \n    # Validate database URL\n    if \"sqlite\" in Config.DATABASE_URL and not Config.DATABASE_URL.startswith(\"sqlite\"):\n        errors.append(\"Invalid SQLite database URL format\")\n    \n    # Validate model names\n    valid_models = [\"gpt-4o\", \"deepseek-coder\", \"llama3.1\"]\n    if Config.SNAKE_CODING_MODEL[\"model_name\"] not in valid_models:\n        errors.append(f\"Invalid coding model: {Config.SNAKE_CODING_MODEL['model_name']}\")\n    \n    # Validate shutdown timeouts\n    if Config.FORCE_SHUTDOWN_AFTER \u0026#x3C; Config.SHUTDOWN_TIMEOUT:\n        errors.append(\"FORCE_SHUTDOWN_AFTER must be greater than SHUTDOWN_TIMEOUT\")\n    \n    return errors\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eDocumentation and Comments\u003c/h3\u003e\n\u003cp\u003eMaintain clear documentation for all configuration options:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003e# Autonomous Loop Settings\n# Controls the frequency and probability of autonomous behaviors\nCURIOSITY_CHANCE = float(os.environ.get(\"CURIOSITY_CHANCE\", 0.3))  # Probability of curiosity-driven actions\nREFLECTION_CHANCE = float(os.environ.get(\"REFLECTION_CHANCE\", 0.1))  # Probability of self-reflection\nLOOP_SLEEP_DURATION = int(os.environ.get(\"LOOP_SLEEP_DURATION\", 10))  # Seconds between loops\n\n# Enhanced Shutdown Configuration\n# Controls the graceful shutdown process with multiple phases and validation\nSHUTDOWN_HEALTH_CHECK_ENABLED = bool(os.environ.get(\"SHUTDOWN_HEALTH_CHECK_ENABLED\", \"True\").lower() in [\"true\", \"1\", \"yes\"])  # Enable pre-shutdown health checks\nSHUTDOWN_BACKUP_ENABLED = bool(os.environ.get(\"SHUTDOWN_BACKUP_ENABLED\", \"True\").lower() in [\"true\", \"1\", \"yes\"])  # Create backups during shutdown\nSHUTDOWN_BACKUP_COUNT = int(os.environ.get(\"SHUTDOWN_BACKUP_COUNT\", 5))  # Number of backup files to retain\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eSection sources\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca\u003econfig.py\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eReferenced Files in This Document\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca\u003econfig.json\u003c/a\u003e - \u003cem\u003eUpdated with new Gemini API keys in commit 281c68a3\u003c/em\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca\u003econfig.py\u003c/a\u003e - \u003cem\u003eEnhanced with new shutdown settings in commit 5d169a6a\u003c/em\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca\u003eshutdown_coordinator.py\u003c/a\u003e - \u003cem\u003eAdded enhanced shutdown functionality\u003c/em\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca\u003ellm.py\u003c/a\u003e - \u003cem\u003eGemini key management implementation\u003c/em\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca\u003epyproject.toml\u003c/a\u003e - \u003cem\u003eUpdated with new dependencies\u003c/em\u003e\u003c/li\u003e\n\u003c/ul\u003e\n"},"docs":[{"slug":"Action System","title":"Action System"},{"slug":"API Reference","title":"API Reference"},{"slug":"Architecture \u0026 Design","title":"Architecture \u0026 Design"},{"slug":"Configuration","title":"Configuration"},{"slug":"Conversational AI Communication Framework","title":"Conversational AI Communication Framework"},{"slug":"Core System","title":"Core System"},{"slug":"Database Schema","title":"Database Schema"},{"slug":"Decision-Making System","title":"Decision-Making System"},{"slug":"Deployment \u0026 Operations","title":"Deployment \u0026 Operations"},{"slug":"Development Guide","title":"Development Guide"},{"slug":"Emotional Intelligence","title":"Emotional Intelligence"},{"slug":"Enhanced Snake Agent","title":"Enhanced Snake Agent"},{"slug":"Enhanced Snake Agent Architecture","title":"Enhanced Snake Agent Architecture"},{"slug":"Graceful Shutdown","title":"Graceful Shutdown"},{"slug":"LLM Integration","title":"LLM Integration"},{"slug":"Memory Systems","title":"Memory Systems"},{"slug":"Multi-Modal Memory","title":"Multi-Modal Memory"},{"slug":"Project Overview","title":"Project Overview"},{"slug":"Self-Improvement","title":"Self-Improvement"},{"slug":"Services","title":"Services"},{"slug":"Snake Agent Configuration","title":"Snake Agent Configuration"},{"slug":"Specialized Modules-57f9b30b-b165-48d3-8e89-196940d26190","title":"Specialized Modules"},{"slug":"Specialized Modules","title":"Specialized Modules"}]},"__N_SSG":true},"page":"/docs/[slug]","query":{"slug":"Configuration"},"buildId":"QHWQNiRZOuW15nbk5-ngt","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>